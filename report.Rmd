```{r, echo = FALSE, warning = FALSE, message = FALSE, include = FALSE, cache = FALSE}

opts_chunk$set(warning = FALSE, message = FALSE, echo = FALSE, comment = NA, 
  results = "asis", cache = FALSE)

source("header.R")
```

```{r}

opts <- list(
  title = "Some Analysis Report",
  author = "Thorley, J.L."
)

rename = c(
  "observed" = "Observation",
  "RB" = "Rainbow Trout",
  "BT" = "Bull Trout")

drop = NULL
```

```{r}
report_header(opts)
```

## Background

This is a Poisson Consulting Ltd. Analysis Report template.

## Methods

### Data Preparation

The count data were generated by simulation.

### Statistical Analysis

Hierarchical Bayesian models were fitted to the data using 
`r substr(R.version.string,1,15)` [@r_core_team_r:_2013] 
and JAGS 3.4.0 [@plummer_jags_2012]
which interfaced with each other via 
jaggernaut `r packageVersion("jaggernaut")` [@thorley_jaggernaut:_2013]. 
For additional information on hierarchical Bayesian modelling in the BUGS language, of which JAGS uses a dialect, the reader is referred to @kery_bayesian_2011 [pp. 41-44].

Unless specified, the models assumed vague (low information) prior distributions 
[@kery_bayesian_2011, pp. 36]. The posterior distributions were estimated from a minimum of 1,000 Markov Chain Monte Carlo (MCMC) samples thinned 
from the second halves of three chains [@kery_bayesian_2011, pp. 38-40]. 
Model convergence was confirmed by ensuring that Rhat [@kery_bayesian_2011, pp. 40]
 was less than 1.1 for each of the parameters in the model 
 [@kery_bayesian_2011, pp. 61]. 
Model adequacy was confirmed by examination of residual plots.

The posterior distributions of the *fixed* 
[@kery_bayesian_2011, pp. 75] parameters
are summarised in terms of a *point* estimate (mean), 
*lower* and *upper* `r opts_jagr("level") * 100`% credible limits (`r (1 - opts_jagr("level")) / 2 * 100`th 
and `r (1 - (1 - opts_jagr("level")) / 2) * 100`th percentiles), the standard deviation (*SD*), percent relative *error* (half the 95% credible interval as a percent of the point estimate) and *significance* [@kery_bayesian_2011, pp. 37, 42].

Variable selection was achieved by dropping *insignificant* 
[@kery_bayesian_2011, pp. 37, 42] fixed [@kery_bayesian_2011, pp. 77-82] variables
and *uninformative* random  variables.
A fixed variables was considered to be
insignificant if its significance was $\geq$ 0.05 while a random variable was
considered to be uninformative if its percent relative error was $\geq$ 80%.

The results are displayed 
graphically by plotting the modeled relationships between particular 
variables and the response with `r opts_jagr("level") * 100`% 
credible intervals (CRIs) with the 
remaining variables held constant. In general, 
continuous and discrete fixed variables are held constant at their mean and 
first level values respectively while random variables are held constant at their 
typical values (expected values of the underlying hyperdistributions) 
[@kery_bayesian_2011, pp. 77-82]. 
Where informative the influence of particular variables is expressed in terms 
of the *effect size* (i.e., percent change in the response variable) with 
`r opts_jagr("level") * 100`% CRIs 
[@bradford_using_2005].

### Model Descriptions

The following model descriptions observe several [conventions](http://www.poissonconsulting.ca/modeling/model-description-conventions.html).

#### Mean Count

The mean count was estimated from the observed counts
using a Poisson t-test. Key assumptions of the mean count model include:

- The counts are Poisson distributed.

```{r}
report_models(rename = rename, drop = drop)
```

## Results

```{r}
report_parameters(rename = rename, drop = drop)
  
report_figures(rename = rename, drop = drop)
```

## Acknowledgements

The organisations and individuals whose contributions have made this analysis report possible include:

- A Company
    - Some One
- Another Company
    - Some Oneelse
    - Some Otherperson

## References
